<!DOCTYPE html>
<html lang="en">
    <head>
        <%- include('../partials/head.ejs')%>
        <link rel="stylesheet" href="/stylesheets/navbar.css">
        <link rel="stylesheet" href="/stylesheets/crear-editar-producto.css">
        <title>Editar Producto</title>
    </head>

<body>
    <%- include('../partials/header.ejs')%>
    <main>
        <section align="center" class="formulario">
            <h2>Editar producto <%= productToEdit.name %></h2>
            <form action="/productos/<%= productToEdit.id %>/detalle?_method=PUT" method="POST" enctype="multipart/form-data">
                <div class="product-type">
                    <label for="">Categor√≠a</label>
                    <br>
                    <select name="category">
                        <% categories.forEach(category => { %>
                            <% if(category.id == productToEdit.category_id) { %>
                                <option value="<%= category.id %>"><%= category.category %></option>
                            <% } %>
                        <% }) %> 
                        <% categories.forEach(category => { %>
                            <option value="<%= category.id %>"><%= category.category %></option>
                        <% }); %>
                    </select>
                </div>
                <div class="product-img">
                    <label for="">Imagen del Producto</label>
                    <br>
                    <input type="file" name="image">
                </div>
                <div class="product-name">
                    <label for="">Titulo</label>
                    <br>
                    <input type="text" name="name" id="name" placeholder="Nombre del producto" value="<%= productToEdit.name %>">
                </div>
                <div class="product-weight">
                    <label for="">Peso en gr</label>
                    <br>
                    
                <div class="attribute-check">
                    <label for="">Atributos del Producto</label>
                    <select name="attribute" id="">
                        <% attributes.forEach(attribute => { %>
                            <% if(attribute.id == productAttribute.attribute_id) { %>
                                <option value="<%= attribute.id %>"><%= attribute.name %></option>
                            <% } %>
                        <% }) %> 
                        <% attributes.forEach(attribute => { %>
                            <option value="<%= attribute.id %>"><%= attribute.name %></option>
                        <% }); %>
                    </select>
                </div>

                </div>
                <div class="product-price">
                    <label for="">Precio</label>
                    <br>
                    <input type="text" name="price" id="price" placeholder="$00,0" value="<%= productToEdit.price %>">
                </div>
               <div class="product-detail">
                   <p><label>Detalle de producto</label></p>
                   <textarea name="description" rows="10" cols="40"><%= productToEdit.description %></textarea>
               </div>
               <div class="product-create">
                <button type="submit" class="product-create-button">Guardar Cambios</button>
                </div>
                <div class="product-create">
                    <button class="product-cancel-button"><a href="/productos/listado">Cancelar</a></button>
                </div>
            </form>
            <div>
                <form action="/productos/<%= productToEdit.id %>/editar?_method=DELETE" method="POST">
                    <button class="product-delete-button" type="submit">Eliminar producto</button>
                </form>
            </div>
        </section>
    <%- include('../partials/footer.ejs')%>
    </main>
</body>
</html>